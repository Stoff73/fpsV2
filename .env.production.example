# =============================================================================
# TenGo v0.2.7 - Production Environment Configuration
# =============================================================================
# For deployment to: https://csjones.co/tengo (SUBDIRECTORY)
# SiteGround Hosting Environment
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME="TenGo - Financial Planning System"
APP_ENV=production
APP_KEY=base64:REPLACE_WITH_GENERATED_KEY_RUN_php_artisan_key:generate
APP_DEBUG=false
APP_URL=https://csjones.co/tengo
APP_TIMEZONE=Europe/London
APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_GB

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# SiteGround adds username prefix to database names and usernames
# Example: cgsjones_tengo_production (your actual values will differ)
DB_CONNECTION=mysql
DB_HOST=localhost
DB_PORT=3306
DB_DATABASE=YOUR_PREFIXED_DATABASE_NAME
DB_USERNAME=YOUR_PREFIXED_USERNAME
DB_PASSWORD=YOUR_SECURE_DATABASE_PASSWORD

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
# Memcached is recommended for production (SiteGround usually provides it)
# If Memcached not available, use 'file' instead
CACHE_DRIVER=memcached
CACHE_PREFIX=tengo_

# Memcached Settings (if available)
MEMCACHED_HOST=127.0.0.1
MEMCACHED_PORT=11211
MEMCACHED_USERNAME=
MEMCACHED_PASSWORD=
MEMCACHED_PERSISTENT_ID=

# Fallback: If Memcached unavailable, comment out above and use:
# CACHE_DRIVER=file

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
# Use database session driver for reliability in shared hosting
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/tengo
SESSION_DOMAIN=.csjones.co
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# =============================================================================
# QUEUE CONFIGURATION
# =============================================================================
# Database queue driver is simplest for shared hosting
# Used for Monte Carlo simulations and async tasks
QUEUE_CONNECTION=database

# Optional: Redis queue (if available on SiteGround)
# QUEUE_CONNECTION=redis
# REDIS_HOST=127.0.0.1
# REDIS_PASSWORD=null
# REDIS_PORT=6379

# =============================================================================
# LOGGING
# =============================================================================
LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error
LOG_DAILY_DAYS=7

# =============================================================================
# MAIL CONFIGURATION
# =============================================================================
# Configure SMTP for production email sending
MAIL_MAILER=smtp
MAIL_HOST=smtp.siteground.com
MAIL_PORT=587
MAIL_USERNAME=YOUR_EMAIL@csjones.co
MAIL_PASSWORD=YOUR_EMAIL_PASSWORD
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@csjones.co"
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# VITE / FRONTEND BUILD CONFIGURATION
# =============================================================================
# CRITICAL: These must match your production URL for assets to load
VITE_APP_NAME="${APP_NAME}"
VITE_API_BASE_URL=https://csjones.co/tengo

# =============================================================================
# SANCTUM API AUTHENTICATION
# =============================================================================
SANCTUM_STATEFUL_DOMAINS=csjones.co
SANCTUM_TOKEN_PREFIX=
SANCTUM_TOKEN_EXPIRATION=480

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
BCRYPT_ROUNDS=12

# Trusted Proxies (SiteGround load balancers) - usually not needed on shared hosting
TRUSTED_PROXIES=

# =============================================================================
# BROADCAST, FILESYSTEM
# =============================================================================
BROADCAST_DRIVER=log
FILESYSTEM_DISK=local

# Asset URL (leave empty for default)
ASSET_URL=

# =============================================================================
# AWS S3 (Optional - for file storage)
# =============================================================================
# Uncomment if using S3 for file storage
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=eu-west-2
# AWS_BUCKET=
# AWS_USE_PATH_STYLE_ENDPOINT=false

# =============================================================================
# MONITORING & ANALYTICS (Optional)
# =============================================================================
# Add monitoring services if needed
# SENTRY_LARAVEL_DSN=
# GOOGLE_ANALYTICS_ID=

# =============================================================================
# DEBUGBAR (MUST BE DISABLED IN PRODUCTION)
# =============================================================================
DEBUGBAR_ENABLED=false

# =============================================================================
# TIMEZONE
# =============================================================================
TZ=Europe/London

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================
# Before deploying, ensure you:
#
# [ ] 1. Generate APP_KEY:
#        php artisan key:generate --show
#        Copy output to APP_KEY above
#
# [ ] 2. Update all YOUR_* placeholders with actual values
#
# [ ] 3. Set correct database credentials from SiteGround Site Tools > MySQL
#
# [ ] 4. Configure email with SiteGround email account
#
# [ ] 5. Verify APP_DEBUG=false for production (CRITICAL)
#
# [ ] 6. Verify APP_URL=https://csjones.co/tengo (includes /tengo)
#
# [ ] 7. Verify VITE_API_BASE_URL=https://csjones.co/tengo (includes /tengo)
#
# [ ] 8. Set SESSION_PATH=/tengo (for subdirectory deployment)
#
# [ ] 9. Test Memcached availability: php -m | grep memcached
#
# [ ] 10. Set strong database password (16+ characters)
#
# =============================================================================
# POST-DEPLOYMENT COMMANDS
# =============================================================================
# After uploading .env file, run these commands via SSH:
#
# cd ~/tengo-app
# php artisan config:cache
# php artisan route:cache
# php artisan view:cache
# php artisan optimize
# composer dump-autoload --optimize
#
# =============================================================================
# TROUBLESHOOTING
# =============================================================================
# If you encounter issues:
# 1. Check Laravel logs: tail -50 storage/logs/laravel.log
# 2. Check SiteGround error logs: Site Tools > Statistics > Error Log
# 3. Test database: php artisan db:show
# 4. Clear all caches: php artisan optimize:clear
# 5. Verify file permissions: chmod -R 775 storage bootstrap/cache
# 6. Verify .htaccess has: RewriteBase /tengo/
#
# =============================================================================
# SECURITY VERIFICATION
# =============================================================================
# [ ] APP_DEBUG=false (CRITICAL - never true in production)
# [ ] APP_ENV=production
# [ ] Strong database password (16+ characters, mixed case, numbers, symbols)
# [ ] APP_KEY generated (32 character base64 string)
# [ ] SESSION_SECURE_COOKIE=true (forces HTTPS)
# [ ] .env file is outside public_html (in ~/tengo-app/)
# [ ] Database backups enabled via admin panel
# [ ] HTTPS enabled (SiteGround provides free Let's Encrypt)
# [ ] File permissions: 775 for storage, 644 for .env
#
# =============================================================================
