{
	"info": {
		"_postman_id": "retirement-module-fps-v2",
		"name": "FPS - Retirement Module",
		"description": "Comprehensive API endpoints for the Retirement Planning module including pension CRUD operations, analysis, contribution optimization, annual allowance checking, and decumulation planning.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "fps-retirement"
	},
	"item": [
		{
			"name": "Retirement Overview",
			"item": [
				{
					"name": "Get All Retirement Data",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/retirement",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement"
							]
						},
						"description": "Retrieves all retirement data for the authenticated user including retirement profile, DC pensions, DB pensions, and State Pension information."
					},
					"response": []
				},
				{
					"name": "Analyze Retirement Position",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"growth_rate\": 0.05,\n    \"inflation_rate\": 0.025\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/retirement/analyze",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"analyze"
							]
						},
						"description": "Performs comprehensive retirement analysis including readiness score, projected income, income gap, and recommendations. Uses specified growth and inflation rates for projections."
					},
					"response": []
				},
				{
					"name": "Get Recommendations",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/retirement/recommendations",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"recommendations"
							]
						},
						"description": "Generates personalized retirement recommendations based on current pension holdings, retirement profile, and analysis results."
					},
					"response": []
				},
				{
					"name": "Run What-If Scenarios",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"scenario_type\": \"contribution_increase\",\n    \"additional_contribution\": 200,\n    \"years_to_retirement\": 20,\n    \"growth_rate\": 0.05\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/retirement/scenarios",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"scenarios"
							]
						},
						"description": "Runs what-if scenarios to model the impact of contribution changes, retirement age adjustments, or investment strategy modifications."
					},
					"response": []
				}
			],
			"description": "Main retirement dashboard and analysis endpoints"
		},
		{
			"name": "DC Pensions (Defined Contribution)",
			"item": [
				{
					"name": "Create DC Pension",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"scheme_name\": \"Workplace Pension\",\n    \"scheme_type\": \"workplace\",\n    \"provider\": \"Aviva\",\n    \"member_number\": \"WP123456\",\n    \"current_fund_value\": 75000,\n    \"employee_contribution_percent\": 5,\n    \"employer_contribution_percent\": 3,\n    \"monthly_contribution_amount\": 500,\n    \"investment_strategy\": \"Balanced Growth\",\n    \"platform_fee_percent\": 0.75,\n    \"retirement_age\": 67\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/retirement/pensions/dc",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"pensions",
								"dc"
							]
						},
						"description": "Creates a new DC pension record including workplace pensions, SIPPs (Self-Invested Personal Pensions), and personal pensions."
					},
					"response": []
				},
				{
					"name": "Update DC Pension",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"scheme_name\": \"Workplace Pension\",\n    \"scheme_type\": \"workplace\",\n    \"provider\": \"Aviva\",\n    \"current_fund_value\": 80000,\n    \"employee_contribution_percent\": 6,\n    \"employer_contribution_percent\": 3,\n    \"monthly_contribution_amount\": 600,\n    \"retirement_age\": 67\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/retirement/pensions/dc/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"pensions",
								"dc",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "DC Pension ID"
								}
							]
						},
						"description": "Updates an existing DC pension with new values such as fund value, contribution rates, or retirement age."
					},
					"response": []
				},
				{
					"name": "Delete DC Pension",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/retirement/pensions/dc/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"pensions",
								"dc",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "DC Pension ID"
								}
							]
						},
						"description": "Deletes a DC pension record from the user's retirement portfolio."
					},
					"response": []
				}
			],
			"description": "CRUD operations for Defined Contribution pensions (Workplace, SIPP, Personal)"
		},
		{
			"name": "DB Pensions (Defined Benefit)",
			"item": [
				{
					"name": "Create DB Pension",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"scheme_name\": \"NHS Pension Scheme\",\n    \"scheme_type\": \"public_sector\",\n    \"accrued_annual_pension\": 18000,\n    \"pensionable_service_years\": 22,\n    \"pensionable_salary\": 48000,\n    \"normal_retirement_age\": 67,\n    \"revaluation_method\": \"CPI indexation\",\n    \"spouse_pension_percent\": 50,\n    \"lump_sum_entitlement\": 54000,\n    \"inflation_protection\": \"cpi\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/retirement/pensions/db",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"pensions",
								"db"
							]
						},
						"description": "Creates a new DB pension record. Common schemes include NHS, Teachers', Civil Service, Local Government, and Police pensions. Note: For projection only - no transfer advice provided."
					},
					"response": []
				},
				{
					"name": "Update DB Pension",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"scheme_name\": \"NHS Pension Scheme\",\n    \"scheme_type\": \"public_sector\",\n    \"accrued_annual_pension\": 20000,\n    \"pensionable_service_years\": 24,\n    \"pensionable_salary\": 50000,\n    \"normal_retirement_age\": 67,\n    \"inflation_protection\": \"cpi\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/retirement/pensions/db/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"pensions",
								"db",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "DB Pension ID"
								}
							]
						},
						"description": "Updates an existing DB pension with revised accrued benefits, service years, or other scheme details."
					},
					"response": []
				},
				{
					"name": "Delete DB Pension",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/retirement/pensions/db/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"pensions",
								"db",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1",
									"description": "DB Pension ID"
								}
							]
						},
						"description": "Deletes a DB pension record from the user's retirement portfolio."
					},
					"response": []
				}
			],
			"description": "CRUD operations for Defined Benefit pensions (Final Salary, Career Average, Public Sector)"
		},
		{
			"name": "State Pension",
			"item": [
				{
					"name": "Update State Pension",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"ni_years_completed\": 28,\n    \"ni_years_required\": 35,\n    \"state_pension_forecast_annual\": 9200,\n    \"state_pension_age\": 67,\n    \"ni_gaps\": [\n        {\n            \"tax_year\": \"2015-16\",\n            \"cost_to_fill\": 800\n        },\n        {\n            \"tax_year\": \"2016-17\",\n            \"cost_to_fill\": 800\n        }\n    ],\n    \"gap_fill_cost\": 1600\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/retirement/state-pension",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"state-pension"
							]
						},
						"description": "Creates or updates State Pension information including National Insurance years completed, forecast amount, and any NI gaps that can be filled. Full State Pension (2024/25): £11,502.40 per year requires 35 qualifying years."
					},
					"response": []
				}
			],
			"description": "State Pension information management (UK New State Pension)"
		},
		{
			"name": "Annual Allowance",
			"item": [
				{
					"name": "Check Annual Allowance",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/retirement/annual-allowance/:taxYear",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"retirement",
								"annual-allowance",
								":taxYear"
							],
							"variable": [
								{
									"key": "taxYear",
									"value": "2024-25",
									"description": "UK Tax Year (e.g., 2024-25)"
								}
							]
						},
						"description": "Checks the user's annual allowance for pension contributions for a given tax year. Standard allowance: £60,000 (2024/25). Includes tapering for high earners (threshold income >£200k, adjusted income >£260k), carry forward from previous 3 years, and MPAA (Money Purchase Annual Allowance) checking if pension accessed flexibly."
					},
					"response": []
				}
			],
			"description": "Annual allowance checking with tapering, carry forward, and MPAA"
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{auth_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:8000",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "",
			"type": "string"
		}
	]
}
